# Proof of Knowledge Protocol 

>[!Index] 
> PART I: Proof of Knowledge Protocol
>1. Abstract
>2. Introduction
>3. Introduction to kEngrams as a Unit of Knowledge
>4. Components of an Engram
>5. Engram Life-cycle
>--> Composition
>--> Addition of Value
>--> Utilization & Evolution
>
>PART II: Technical Overview
> 1.  Engram Creation
>     --> Utilizing Ethereum Attestation Service (EAS) in the Proof of Knowledge (PoK) Protocol
> 	--> Defining a kEngram Schema for Proof of Knowledge
> 2. Validation of Engrams
> 	--> Coherence and The Role Of The Human Operator
> 	--> Local to Global Coherence
> 3. Knowledge Validation & Value Attribution
> 	--> The Role of the Search System and User Metrics
> 4. Engram Evolution
> 5. Conclusion




>[!Abstract]
>This document provides an in-depth exploration of the Proof of Knowledge (PoK) protocol. This protocol, integral to the DeSciWorld ecosystem, uses a decentralized architecture to reward knowledge contributions. The document discusses the lifecycle of kEngrams, the structured units of knowledge, and the role of the Ethereum Attestation Service (EAS) in validating and recording interactions. It also outlines the importance of coherence in engram creation and the human operators' role in maintaining it. The document further explains the validation process within the PoK ecosystem, emphasizing the organic determination of each Engram's relevancy through usage and demand. The PoK mechanism's dynamic and adaptable nature is highlighted, underscoring its potential to foster a high standard of shared knowledge.
# Introduction

In the complex realm of knowledge-sharing and discovery, striking a balance between security, transparency, reward mechanisms and accessibility is a persistent challenge. Traditional models often hinge on centralized validation systems that may constrain inclusivity and broad-based participation. Moreover, current systems may fail to adequately reward or recognize knowledge contributions, possibly impacting the advancement of comprehensive, collective knowledge repositories.

>[!Proof of Knowledge Definitition]
Proof of Knowledge (PoK) Is a cryptographic proof that attests to the creation of an kEngram, which is a digital representation of a unit of knowledge. The PoK mechanism rewards individuals for their contributions of knowledge via a blockchain-based platform, allowing for seamless recognition, validation, and dedication of rewards. 

This document provides a detailed examination of the Proof of Knowledge protocol - outlining the process of submission and validation of knowledge through the creation of kEngrams, the ascription of value to these contributions, and how interaction metrics shape the dynamic value allocation. As a fundamental building block towards a fully-fledged knowledge-based economy, the PoK protocol offers a comprehensive framework to fuel intellectual contribution and foster an environment of continuous learning and knowledge exchange.

#  Proof of Knowledge 

The Proof of Knowledge (PoK) protocol is built around the attestation of **kEngrams** (kE). kEngrams are designed as a blockchain-based primitive aimed to incentivize and reward knowledge contributions within a decentralized architecture. They serve as the core building block of a globally coherent knowledge graph which can be the primary means of value creation of a knowledge-based economy, paving the way for fair recognition and incentivization of intellectual contributions, while maintaining transparency and accessibility.


![[Pasted image 20231113085501.png]]

### Introduction to kEngrams as a Unit of Knowledge 

kEngrams can be defined as a structured unit or node of knowledge within a Knowledge Graph. It's a piece of information that is interconnected within a broader landscape of data, contributing to the broader understanding of a concept or topic.

---

---

# Components of an Engram
![[Pasted image 20231116101250.png]]
An Engram consists of several integral components that collectively contribute to its formation and execution:

1. **Research Question:** This encompasses the essential content of the query. and can exist without a reference to other notes.

2. ** Research Data:** This is the base content of the Engram, formulated into a set of markdown notes that contains the information added in order to explore the study question. Research data must point to the research question or another Data Node
   
3. **Metadata:** The Metadata provides critical information about the ownership of the engram and its historic record of usage by the DSW PoK protocol. It lends context and understanding about the contained knowledge, bolstering its relevance within the Knowledge Graph.

4. **Unique Identifier:** Every Engram has a unique ID associated with it, allowing for its distinct recognition, tracking, and management within the overall Knowledge Graph system.

5. **Relationships:** These are connections that a kEngram has among its underlying data. These relationships can be thought of as edges in the graph, defining how pieces of information are interconnected, and enabling the creation of a comprehensive, multi-dimensional structure of knowledge.
## Engram Life-cycle

The life-cycle of an Engram is a dynamic and multi-faceted process, marked by several steps: its composition, addition of value, utilization, and evolution over time. Here's a general overview of the process:

#### 1. Composition

The life-cycle of an Engram begins with its composition. Typically, a group or an individual creates an Engram by compiling pertinent information around a specific topic or query. This information, commonly referred to as 'data', is then structured and organized within the engram to establish the shape and contents of the knowledge unit which then get submitted using the Ethereum Attestation Protocol (EAP).

#### 2. Addition of Value

Once a kEngram has been formed, it can be further enriched and enhanced by other groups or individuals who add their own knowledge and insights to it. They can integrate additional data, revise existing information, or link the kEngram to other related kEngram within the Knowledge Graph. This collaborative process of knowledge amplification adds a multi-dimensional depth of understanding to the kEngram, enhancing its value.


#### 3. Utilization & Evolution

Engrams, once submitted, are then available for use. They are identified and selected by AI interfaces based on their relevance to specific queries or tasks. The frequency, context, and nature of how these Engrams are utilized play a crucial role in determining their ongoing validation scores and their corresponding value within the knowledge market.

---


### Utilizing Ethereum Attestation Service (EAS) in the Proof of Knowledge (PoK) Protocol

An integral component of our Proof of Knowledge (PoK) protocol is the Ethereum Attestation Service (EAS).  EAS provides a secure, decentralized, and transparent system for verifying and validating various kinds of interactions within our knowledge ecosystem.

Specifically, within the PoK protocol, the EAS applies to the life-cycle of a kEngram. This life-cycle includes the initial creation of kEngram, stages of value addition, their utilization by various users, and their evolution over time. The EAS authenticates each stage of this process, creating a reliable record of kEngram or SQ history and interactions.

When a kEngram is first created, it is recorded via an attestation. The creator of the kEngram is also noted through EAS, attesting that they were the original contributor of that knowledge piece. As value is added to this kEngram—be it through more data, insights, revisions, or connections—each change is also captured through an attestation, creating a trail of evolution and accumulation of intellectual input.

![[Pasted image 20231113084825.png]]

As the kEngram continues to be used among a global network of AI interfaces, each interaction and usage is also documented. These records contribute to an Engram's ongoing validation in our ecosystem. This evidence-based approach ensures that each Engram's relevance, accuracy, and utility are continuously verified, evaluated, and updated.

Finally, the Ethereum Attestation Service also lays the groundwork for our incentive mechanism. Each attestation becomes part of the computation determining value attribution and reward distribution. EAS ensures a transparent and fair system where contributors of Engrams are rewarded based on actual utility and demand in the ecosystem.

In summary, the use of EAS within the PoK protocol forms a trustworthy and secure system for validating knowledge contributions and rewarding contributors. It answers the call for a distributed, transparent, and reliable method to authenticate, validate, and incentivize meaningful engagements in a decentralized knowledge ecosystem.

### Coherence and The Role Of The Human Operator

Coherence, in the context of engram creation, serves as a crucial metric to ensure the consistency and logical connection between different knowledge units within an engram. It is essential for delivering a seamless narrative that not only makes sense but also accurately and efficiently serves to answer queries generated within the system.

Human operators play a pivotal role in maintaining and ensuring coherence within engrams. They design, monitor, and adjust the processes of engram creation and structuring, thereby ensuring that individual pieces of information are logically and correctly linked together. They act as the quality control mechanism to ensure there is no dissonance within the knowledge nodes and that each engram maintains structural and informational integrity. 

Human operators also refine the accuracy and relevance of the information within engrams, periodically updating and revising the information as necessary. They are also responsible for analyzing coherence metric outcomes, making decisions to restructure or revise engrams whenever necessary to optimize coherence.

### Local to Global Coherence

Local coherence refers to the immediate relationships and connections within singular engrams, while global coherence extends to the broader context of the Knowledge Graph, considering the relationships and interconnections between multiple engrams.

The extrapolation of local coherence to globally coherent embedding spaces is a critical aspect of Knowledge Graph development. It ensures that the entire structure of interconnected knowledge is logical, consistent, and cohesive, thereby maximizing the usefulness and reliability of the Knowledge Graph as a whole.

When local coherence is maintained within each engram, and these coherently structured engrams are interconnected, it leads to the creation of a globally coherent embedding space. 

This global coherence is fundamental for the effective functioning of AI in deriving meaningful insights and responses from the Knowledge Graph. A globally coherent Space allows for efficient navigation through the Knowledge Graph, easier identification of relevant engrams, and more accurate responses to queries or tasks. 

In a nutshell, coherence is fundamental, shaping the value of Knowledge Engrams, and ultimately, informing the efficacy and accuracy of a Knowledge Graph. By prioritizing coherence via engram structuring and human operator guidance, one can facilitate accurate, meaningful, and useful exchanges of information within this system.

#### Knowledge Validation & Value Attribution

The validation process within the DeSciWorld PoK ecosystem operates as an emergent property of a free market of knowledge. It is an unconstrained arena where diverse viewpoints vie for relevancy, encouraging a robust, dynamic interplay of ideas and perspectives.

Unlike conventional, centralized validation systems, this decentralized model does not pre-emptively adjudicate or prioritize one piece of knowledge over another. Instead, the relevancy of each Engram or Study Question (SQ) is determined organically through its usage and demand within the ecosystem.

In this free market of knowledge, each Engram competes for attention and usage. The merit of an Engram is not determined by a unilateral authority but through its actual utility and effectiveness in satisfying a user's query or task. Engrams that demonstrate persistent usefulness and applicability over time, as judged through the unbiased lens of Language Learning Models (LLMs), accrue higher relevancy scores.

This competitive and responsive environment ensures that the validation process is continuously refined and realigned according to the evolving needs and preferences of users. It overcomes inherent biases and silos, fostering a system where the best, most useful, and most relevant knowledge prospers.

In essence, within the DeSciWorld model, validation isn't a one-time stamp of approval but a continuous process of adaptation, adjustment, and evolution — a dynamic reflection of a knowledge unit's continuous performance in the marketplace of ideas and information.

##### The Role of the Search System and User Metrics 

An integral part of DeSciWorld's PoK mechanism is the advanced AI-based search system. The search system is used  to maintain an updated embedding set which can locate specific Engrams or Study Questions. Each substantial interaction with an Engram sends usage data to the PoK mechanism which can be used to determine incentives for the creation of relevant engrams. 

User interactions can range from the frequency of appearances of an SQ in search results, the frequency of its selection from the results, the number of direct or indirect references made to it in new SQs, and assessments of how helpful the SQ was to a user's research or learning process. 

The system measures these interactions and, based on that, adjusts the value of each Engram. The more an Engram is recognized as beneficial or pivotal to ongoing research or learning, the more value it gains in the system, and the greater rewards are distributed to the Nerd who contributed it.
#### Engram Evolution 

As knowledge terrains continue to expand and evolve, so do Engrams. Along the life-cycle, an Engram may undergo several evolutions, manifested as updates, revisions, or further value additions. New data may be contributed, older information may be updated or made obsolete, and new connections to different Engrams may be established. All these changes contribute to the growing lifecycle of an Engram, helping it remain relevant, useful, and accurate in the dynamic ecosystem of the Knowledge Graph.

In essence, the life-cycle of an Engram is a continual journey of knowledge creation, addition, validation, utilization, and evolution. It encourages constant engagement, collaboration, and learning, fostering a vibrant, interconnected hub of collective knowledge.

## Conclusion

The Proof-of-Knowledge mechanism as part of the DeSciWorld ecosystem uses blockchain technology for incentivizing contributions and verifying the accuracy and relevance of knowledge within the network. It offers a dynamic and adaptable system that caters to the varying needs and interests of users while continually encouraging a superior standard of shared knowledge.


# SECTION II: Technical Overview


### Defining a kEngram Schema for Proof of Knowledge

Ethereum Attestation Service (EAS) schemas define the structure and type of data in an attestation. To facilitate the verification and recording process of an kEngram within the Proof of Knowledge (PoK) protocol, we need to create a schema that includes all the necessary details about each Engram.

The PoK system is a method of linking data points to their original research question. This is achieved through the creation and usage of kEngrams, which are JSON objects that contain various pieces of structured information. 

Here's an example schema for the kEngram record:

```
{
    Schema # : "Incremental number",   //This number is auto-assigned & non-unique
    UID: "Unique Identifier",          //This identifier is unique to the engram
    Creator: "Creator's wallet address",  
    Transaction_ID: "Ethereum transaction ID",  //Transaction ID for the engram creation
    Resolver_Contract: "Optional contract ID",  //If any, for complex cases
    Attestation_Count: "Number",       //The number of attestations made on/off chain
    Schema: {
        Engram_Title: "String",
        Engram_Description: "String",
        Engram_Creation_Timestamp: "UNIX Timestamp",
        Related_Study_Questions: ["Array of Study Question UIDs"],
        Knowledge_Field: "String", //The field of knowledge the Engram pertains 
        Engram_Contributor: "User ID/Wallet address of the contributor",
        Engram_Usage_Metrics: {
            Frequency_Of_Appearance: "Number",
            Frequency_Of_Selection: "Number",
            Frequency_Of_References: "Number",
            Helpfulness_Rating: "Float", //Scale of 1-5
        },
    }
}
```

This schema clearly and concisely captures all necessary information about each kEngram. It records the kEngram's title, description, the timestamp of its creation, and its associated Study Questions. It also includes a field indicating which domain of knowledge the kEngram falls under. We attribute each kEngram to its contributor and track usage metrics to understand how frequently the kEngram is appearing and selected, how often it is referenced, and how helpful users find it.

**Note:** This is an initial outline for a schema dedicated to recording a kEngram as a proof-of-knowledge. Depending on the specific requirements of your project, this schema could need to be extended or modified. Moreover, don't forget to consider gas efficiency when designing your schema - try to maintain a balance between the level of detail and efficiency.

#### Validation of Engrams

The validation process of individual kEngram happens continually throughout the lifecycle of its usage by a global network of AI interfaces. This mechanism operates as a form of a knowledge market, where the relevance, accuracy, and usefulness of a kEngram's information are tested and reaffirmed through its active usage and demand.

AI interfaces, when querying a database or Knowledge Graph, will interact with and select Engrams based on their relevance and usefulness to the query or task at hand. These traces and records of interaction and usage then form a part of the 'lifecycle' of the Engram. Over time, Engrams that repeatedly prove to be beneficial and relevant will garner higher validation scores through their usage statistics.

This method of validation leverages the dynamic and iterative abilities of AI - factoring in the frequency, nature, and context of an Engram's usage - to ascertain its value and authenticity within the Knowledge Graph. It serves to maintain the quality, relevance, and value of information in the Knowledge Graph, ensuring that the Engrams reflect validated, useful, and reliable units of knowledge.

## Engram Creation

kEngrams are JSON objects that serve as a bridge between individual data points attested over time and the original research question which serves as an achor point to determine coherence. They are designed to be flexible and adaptable, capable of containing any type of information as long as they reference each other. 

The structure of a kEngram includes:
- The Study question: This is the base note of the kEngram. It is the original research question that the data points are linked to.
- The position of each data point on the X and Y axis: This helps in visualizing the data and understanding its relation to the research question.
- Individual notes within an engram: These notes can contain any type of information, as long as they are referencing each other.

## The Attestation Record[​](https://docs.attest.sh/docs/tutorials/make-an-attestation#the-attestation-record "Direct link to heading")

A unique `attestation record` is created each time an attestation is made using EAS and can be verified on the [EAS explorer](https://easscan.com/). The attestation record contains important information about the attestation, including the schema used, the attestor, the recipient (if specified), the expiration time (if specified), and more.

## Understanding the Attestation Record[​](https://docs.attest.sh/docs/tutorials/make-an-attestation#understanding-the-attestation-record "Direct link to heading")

Each attestation record has the following fields:

- `UID` - this is a universal unique identification number for the attestation.
- `Schema` - the UID of the schema used to make the attestation.
- `Attestor` - the address that made the attestation.
- `Recipient` - an **optional** recipient of the attestation that was made.
- `Expiration Time` - an **optional** date that the attestation will expire if provided by the attestor.
- `Revocation Time` - the time at which the attestation was revoked (if any).
- `refUID` - An attestation that this attestation is referencing (if any).
- `data`- The ABI encoded data for the attestation.
## Engram Attestation

The PoK system allows for questions to be submitted onchain through the Ethereum Attestation Service (EAS). This service enables the attestation schema to be attached to a smart contract, guaranteeing ownership over further attestations of a particular question. 

Attestations can be produced offchain for no gas cost, and can be submitted in bulk through merkle trees for the entire contents of the engram. The submission of attestations is facilitated through the DSW obsidian plugin.

### Attester Resolver[​](https://docs.attest.sh/docs/tutorials/resolver-contracts#attester-resolver "Direct link to heading")

The `AttesterResolver.sol` resolvers purpose is to check if an attestation is created by a specific attester, which has previously registered into the contract. When a new attestation is submitted using this resolver, the contract verifies that the attestation comes from the same attester before allowing it to proceed.


```solidity
// SPDX-License-Identifier: MIT

pragma solidity 0.8.19;

import { SchemaResolver } from "../SchemaResolver.sol";
import { IEAS, Attestation } from "../../IEAS.sol";

/**
 * @title A sample schema resolver that checks whether the attestation is from a registered attester.
 */
contract AttesterResolver is SchemaResolver {
    mapping(address => bool) private _registeredAttesters;

    constructor(IEAS eas) SchemaResolver(eas) {}

    function registerAttester(address attester) public {
        _registeredAttesters[attester] = true;
    }

    function onAttest(Attestation calldata attestation, uint256 /*value*/) internal view override returns (bool) {
        return _registeredAttesters[attestation.attester];
    }

    function onRevoke(Attestation calldata /*attestation*/, uint256 /*value*/) internal pure override returns (bool) {
        return true;
    }
}
```

# Referenced Attestations

`refUID` is one of the most powerful features of an EAS attestation that unlocks its composability by allowing one attestation to reference another.

This functionality enables the creation of a hierarchy or a chain of attestations that depend on one another. In doing so, attestations can be organized in a more structured manner and their relationships can be easily understood.

## Concept[​](https://docs.attest.sh/docs/tutorials/referenced-attestations#concept "Direct link to heading")

An attestation can reference another attestation by including its unique identifier (UID) as the refUID field in the new attestation. The referenced attestation serves as a basis or prerequisite for the new attestation. This relationship can be used to represent dependencies between attestations, where one attestation's validity or relevance is improved upon by the existence and validity of another.

## Engram Usage

The PoK system utilizes a chat interface framework known as Khoj. This framework allows for a vector search of existing kEngrams to find relevant context. Once a research question is found, the related notes are also produced in order to regenerate the context for the LLM to use

Once the response is created. The user will see which notes were selected to create the response after which, the system will create an offchain attestation  and propagation using the Ceramic Network. This allows for efficient indexing of attestations, kEngram scoring, and royalty payout to creators.

## Ceramic Network[​](https://docs.attest.sh/docs/tutorials/ceramic-storage#ceramic-network "Direct link to heading")

 [Ceramic](https://ceramic.network/), a decentralized data network that leverages the provenance-related qualities you can expect from a blockchain, with the cost efficiency and querying capabilities you'd experience with a traditional database. Ceramic also empowers developers to leverage the interoperable data formats stored within the Network, enabling product teams to circumvent the "cold-start" data problem, while allowing individuals to take ownership of their digital presence.

### How does it Work?[​](https://docs.attest.sh/docs/tutorials/ceramic-storage#how-does-it-work "Direct link to heading")

The Ceramic Protocol is built on decentralized event streams, where user accounts (enabled by decentralized identifiers, or [DIDs](https://developers.ceramic.network/protocol/accounts/decentralized-identifiers/)) cryptographically sign data events and submit them to the network. The events themselves are stored in the Interplanetary File System (IPFS) using the IPLD protocol, which are organized into readable streams. As such, streams are flexible enough to store many types of content such as user profiles, posts, relations to other entities, and (you guessed it) attestations.

### Ceramic as a Data Ledger[​](https://docs.attest.sh/docs/tutorials/ceramic-storage#ceramic-as-a-data-ledger "Direct link to heading")

Finally, it's important to note that Ceramic can be viewed as a "Data Ledger" middleground-of-sorts between on-chain activity and the off-chain realm. All Ceramic events are periodically rolled into a merkle tree and the root is published to the Ethereum blockchain, preserving consensus on the global ordering of Ceramic transactions.

For more information on how Ceramic works, visit [How it Works](https://ceramic.network/how-it-works).

### ComposeDB[​](https://docs.attest.sh/docs/tutorials/ceramic-storage#composedb "Direct link to heading")

ComposeDB is a graph database built on Ceramic that offers further composability and ease-of-querying to developers. ComposeDB comes with native support for GraphQL, and also automatically splits read/write load for additional performance. When running a Ceramic node with ComposeDB, developers can define their own [data models](https://composedb.js.org/docs/0.5.x/create-your-composite) using GraphQL, or choose to begin indexing on existing data models already defined by the community, or both!

For the purpose of this tutorial, we will be using Ceramic with ComposeDB to illustrate how developers can generate, store, and query off-chain attestations.

## Proof of Knowledge DSW Issuance

The Proof of Knowledge (PoK) protocol utilizes the DSW token as a utility token within its system. The DSW token plays a crucial role in incentivizing the creation of kEngrams.

The issuance of DSW tokens is directly tied to the usage of kEngrams. Creators of kEngrams are rewarded with DSW tokens based on the number of attestations of usage their kEngram has been responsible for in a given period. This means that the more a kEngram is used and referenced within the PoK system, the more DSW tokens the creator of that kEngram will receive.

This system of issuance serves two main purposes. Firstly, it incentivizes the creation of high-quality kEngrams, as creators are rewarded based on the usage of their kEngrams. Secondly, it ensures a fair distribution of DSW tokens, as those who contribute the most to the PoK system are rewarded the most.

The PoK system also allows for questions to be submitted onchain through the Ethereum Attestation Service (EAS). This service enables the attestation schema to be attached to a smart contract, guaranteeing ownership over further attestations of a particular question. Attestations can be produced offchain for no gas cost, and can be submitted in bulk through merkle trees for the entire contents of the engram.

Once an attestation is created, it is propagated with the Ceramic Network, which allows for efficient indexing of attestations, kEngram scoring, and royalty payout to creators. This integration with the Ceramic Network further enhances the utility of the DSW token, as it allows for a decentralized and efficient method of tracking and rewarding the usage of kEngrams.

## Tokenomic Overview

The DSW token is a utility token within the PoK system, designed to incentivize the creation and usage of kEngrams. The token is issued based on the number of attestations of usage a kEngram has generated.

## Token Issuance

1. **Initial Distribution**: A fixed amount of DSW tokens will be minted at the launch of the PoK system. This initial supply will be allocated to the development team, early backers, and a reserve for future development and partnerships.
    
2. **Reward for kEngram Creators**: A portion of the DSW tokens will be allocated as rewards for kEngram creators. The number of tokens issued to each creator will be proportional to the number of attestations their kEngrams generate. This incentivizes the creation of high-quality kEngrams.
    
3. **Community Rewards**: A portion of DSW tokens will be set aside for community rewards. These can be earned by users who contribute to the PoK system, such as by participating in community events, providing feedback, or helping to improve the system.
    

## Token Utility

DSW tokens are used within the PoK system to incentivize and reward the creation and usage of kEngrams. The tokens have several utilities:

1. **Reward for kEngram Usage**: Users who create kEngrams that are frequently used and referenced within the PoK system will receive DSW tokens as a reward.
    
2. **Governance**: DSW token holders may have the right to participate in the governance of the PoK system, voting on various proposals such as changes to the system, token issuance rate, and more.
    
3. **Access to Premium Features**: In the future, DSW tokens could potentially be used to access premium features within the PoK system.



